import { FC, useEffect, useState } from 'react';
import {
  View,
  Text,
  StyleSheet,
  SafeAreaView,
  TouchableOpacity,
  StatusBar,
} from 'react-native';
import { useNavigation } from '@react-navigation/native';
import { NativeStackNavigationProp } from '@react-navigation/native-stack';
import { RootStackParamList } from '../../types/navigation';
import Header from '../../components/Header';

// iPhone 15, 15 Pro 크기 기준
const screenWidth = 393;
const screenHeight = 852;

// 해피 캐릭터 컴포넌트
const HappyCharacter = ({ width = 108, height = 108, isPressed = false }) => {
  if (isPressed) {
    // 찌부러진 상태
    return (
      <svg xmlns="http://www.w3.org/2000/svg" width={width} height={height} viewBox="0 0 109 95" fill="none">
        <ellipse cx="54.2207" cy="47.5" rx="54" ry="47.5" fill="#FED046"/>
        <ellipse cx="26.7566" cy="36.7905" rx="10.9213" ry="9.60674" fill="#F5F5F5"/>
        <ellipse cx="49.5275" cy="36.7905" rx="10.9213" ry="9.60674" fill="#F5F5F5"/>
        <mask id="mask0_3353_102" style={{maskType:"alpha"}} maskUnits="userSpaceOnUse" x="15" y="27" width="23" height="20">
          <ellipse cx="26.7566" cy="36.7905" rx="10.9213" ry="9.60674" fill="#F5F5F5"/>
        </mask>
        <g mask="url(#mask0_3353_102)">
          <ellipse cx="17.649" cy="36.791" rx="10.922" ry="9.6073" fill="#0A0A0A"/>
        </g>
        <mask id="mask1_3353_102" style={{maskType:"alpha"}} maskUnits="userSpaceOnUse" x="38" y="27" width="23" height="20">
          <ellipse cx="49.5275" cy="36.7905" rx="10.9213" ry="9.60674" fill="#F5F5F5"/>
        </mask>
        <g mask="url(#mask1_3353_102)">
          <ellipse cx="40.4195" cy="36.791" rx="10.922" ry="9.6073" fill="#0A0A0A"/>
        </g>
        <ellipse cx="26.7566" cy="36.7905" rx="10.9213" ry="9.60674" fill="#F5F5F5"/>
        <ellipse cx="49.5275" cy="36.7905" rx="10.9213" ry="9.60674" fill="#F5F5F5"/>
        <mask id="mask2_3353_102" style={{maskType:"alpha"}} maskUnits="userSpaceOnUse" x="15" y="27" width="23" height="20">
          <ellipse cx="26.7566" cy="36.7905" rx="10.9213" ry="9.60674" fill="#F5F5F5"/>
        </mask>
        <g mask="url(#mask2_3353_102)">
          <ellipse cx="17.649" cy="36.791" rx="10.922" ry="9.6073" fill="#0A0A0A"/>
        </g>
        <mask id="mask3_3353_102" style={{maskType:"alpha"}} maskUnits="userSpaceOnUse" x="38" y="27" width="23" height="20">
          <ellipse cx="49.5275" cy="36.7905" rx="10.9213" ry="9.60674" fill="#F5F5F5"/>
        </mask>
        <g mask="url(#mask3_3353_102)">
          <ellipse cx="40.4195" cy="36.791" rx="10.922" ry="9.6073" fill="#0A0A0A"/>
        </g>
        <path d="M34.7026 46.3554C34.7026 49.2169 40.5581 49.3599 40.5581 46.3554" stroke="#0A0A0A" strokeWidth="1.62651" strokeLinecap="round"/>
        <path d="M30.799 38.4865C30.799 39.1315 30.5077 39.7502 29.9892 40.2063C29.4706 40.6624 28.7673 40.9187 28.034 40.9187C27.3006 40.9187 26.5973 40.6624 26.0788 40.2063C25.5602 39.7502 25.2689 39.1315 25.2689 38.4865L28.034 38.4865H30.799Z" fill="#F5F5F5"/>
        <path d="M53.5702 38.4865C53.5702 39.1315 53.2788 39.7502 52.7603 40.2063C52.2417 40.6624 51.5384 40.9187 50.8051 40.9187C50.0718 40.9187 49.3685 40.6624 48.8499 40.2063C48.3314 39.7502 48.04 39.1315 48.04 38.4865L50.8051 38.4865H53.5702Z" fill="#F5F5F5"/>
      </svg>
    );
  }
  
  // 기본 상태
  return (
    <svg xmlns="http://www.w3.org/2000/svg" width={width} height={height} viewBox="0 0 108 108" fill="none">
      <circle cx="54" cy="54" r="54" fill="#FED046"/>
      <circle cx="26.5359" cy="41.825" r="10.9213" fill="#F5F5F5"/>
      <circle cx="49.3068" cy="41.825" r="10.9213" fill="#F5F5F5"/>
      <mask id="mask0_3091_6694" style={{maskType:"alpha"}} maskUnits="userSpaceOnUse" x="15" y="30" width="23" height="23">
        <circle cx="26.5359" cy="41.825" r="10.9213" fill="#F5F5F5"/>
      </mask>
      <g mask="url(#mask0_3091_6694)">
        <circle cx="17.4283" cy="41.8256" r="10.922" fill="#0A0A0A"/>
      </g>
      <mask id="mask1_3091_6694" style={{maskType:"alpha"}} maskUnits="userSpaceOnUse" x="38" y="30" width="23" height="23">
        <circle cx="49.3068" cy="41.825" r="10.9213" fill="#F5F5F5"/>
      </mask>
      <g mask="url(#mask1_3091_6694)">
        <circle cx="40.1988" cy="41.8256" r="10.922" fill="#0A0A0A"/>
      </g>
      <circle cx="26.5359" cy="41.825" r="10.9213" fill="#F5F5F5"/>
      <circle cx="49.3068" cy="41.825" r="10.9213" fill="#F5F5F5"/>
      <mask id="mask2_3091_6694" style={{maskType:"alpha"}} maskUnits="userSpaceOnUse" x="15" y="30" width="23" height="23">
        <circle cx="26.5359" cy="41.825" r="10.9213" fill="#F5F5F5"/>
      </mask>
      <g mask="url(#mask2_3091_6694)">
        <circle cx="17.4283" cy="41.8256" r="10.922" fill="#0A0A0A"/>
      </g>
      <mask id="mask3_3091_6694" style={{maskType:"alpha"}} maskUnits="userSpaceOnUse" x="38" y="30" width="23" height="23">
        <circle cx="49.3068" cy="41.825" r="10.9213" fill="#F5F5F5"/>
      </mask>
      <g mask="url(#mask3_3091_6694)">
        <circle cx="40.1988" cy="41.8256" r="10.922" fill="#0A0A0A"/>
      </g>
      <path d="M34.4819 52.6988C34.4819 55.9518 40.3374 56.1145 40.3374 52.6988" stroke="#0A0A0A" strokeWidth="1.62651" strokeLinecap="round"/>
      <path d="M30.5782 43.753C30.5782 44.4864 30.2869 45.1897 29.7683 45.7082C29.2498 46.2268 28.5465 46.5181 27.8132 46.5181C27.0798 46.5181 26.3765 46.2268 25.858 45.7082C25.3394 45.1897 25.0481 44.4864 25.0481 43.753L27.8132 43.753H30.5782Z" fill="#F5F5F5"/>
      <path d="M53.3495 43.753C53.3495 44.4864 53.0581 45.1897 52.5396 45.7082C52.021 46.2268 51.3177 46.5181 50.5844 46.5181C49.8511 46.5181 49.1478 46.2268 48.6292 45.7082C48.1107 45.1897 47.8193 44.4864 47.8193 43.753L50.5844 43.753H53.3495Z" fill="#F5F5F5"/>
    </svg>
  );
};

// 새드 캐릭터 컴포넌트
const SadCharacter = ({ width = 41, height = 89, isPressed = false }) => {
  if (isPressed) {
    // 찌부러진 상태
    return (
      <svg xmlns="http://www.w3.org/2000/svg" width={width} height={height} viewBox="0 0 42 82" fill="none">
        <rect x="0.966797" y="0.261078" width="41" height="81.2102" rx="2.58947" fill="#47AFF4"/>
        <ellipse cx="13.1605" cy="9.89911" rx="7.77297" ry="7.10019" fill="#F5F5F5"/>
        <ellipse cx="29.3672" cy="9.89911" rx="7.77297" ry="7.10019" fill="#F5F5F5"/>
        <mask id="mask0_3353_63" style={{maskType:"alpha"}} maskUnits="userSpaceOnUse" x="5" y="2" width="16" height="15">
          <ellipse cx="13.1605" cy="9.89911" rx="7.77297" ry="7.10019" fill="#F5F5F5"/>
        </mask>
        <g mask="url(#mask0_3353_63)">
          <ellipse cx="19.1805" cy="9.8995" rx="7.77342" ry="7.10061" fill="#0A0A0A"/>
        </g>
        <mask id="mask1_3353_63" style={{maskType:"alpha"}} maskUnits="userSpaceOnUse" x="21" y="2" width="17" height="15">
          <ellipse cx="29.3672" cy="9.89911" rx="7.77297" ry="7.10019" fill="#F5F5F5"/>
        </mask>
        <g mask="url(#mask1_3353_63)">
          <ellipse cx="34.9242" cy="9.8995" rx="7.77342" ry="7.10061" fill="#0A0A0A"/>
        </g>
        <rect x="7.47131" y="13.1617" width="5.7881" height="26.8586" rx="2.89405" fill="#F5F5F5"/>
        <rect x="29.6976" y="14.6421" width="4.74737" height="12.6152" rx="2.37368" fill="#F5F5F5"/>
        <path d="M23.4464 18.5944C23.4464 16.4795 19.279 16.3738 19.279 18.5944" stroke="#0A0A0A" strokeWidth="1.15762" strokeLinecap="round"/>
        <path d="M13.72 11.364C13.72 11.8408 13.5127 12.298 13.1436 12.6352C12.7745 12.9723 12.274 13.1617 11.752 13.1617C11.2301 13.1617 10.7295 12.9723 10.3605 12.6352C9.99142 12.298 9.78408 11.8408 9.78408 11.364L11.752 11.364H13.72Z" fill="#F5F5F5"/>
        <path d="M29.6976 11.3641C29.6976 11.8408 29.4903 12.298 29.1212 12.6352C28.7522 12.9723 28.2516 13.1617 27.7297 13.1617C27.2077 13.1617 26.7072 12.9723 26.3381 12.6352C25.9691 12.298 25.7617 11.8408 25.7617 11.3641L27.7297 11.3641H29.6976Z" fill="#F5F5F5"/>
      </svg>
    );
  }
  
  // 기본 상태
  return (
    <svg xmlns="http://www.w3.org/2000/svg" width={width} height={height} viewBox="0 0 41 90" fill="none">
      <rect y="0.112366" width="41" height="88.9053" rx="2.58947" fill="#47AFF4"/>
      <circle cx="12.1939" cy="10.6637" r="7.77297" fill="#F5F5F5"/>
      <circle cx="28.4004" cy="10.6637" r="7.77297" fill="#F5F5F5"/>
      <mask id="mask0_3154_1337" style={{maskType:"alpha"}} maskUnits="userSpaceOnUse" x="4" y="2" width="16" height="17">
        <circle cx="12.1939" cy="10.6637" r="7.77297" fill="#F5F5F5"/>
      </mask>
      <g mask="url(#mask0_3154_1337)">
        <circle cx="18.2139" cy="10.6641" r="7.77342" fill="#0A0A0A"/>
      </g>
      <mask id="mask1_3154_1337" style={{maskType:"alpha"}} maskUnits="userSpaceOnUse" x="20" y="2" width="17" height="17">
        <circle cx="28.4004" cy="10.6637" r="7.77297" fill="#F5F5F5"/>
      </mask>
      <g mask="url(#mask1_3154_1337)">
        <circle cx="33.9575" cy="10.6641" r="7.77342" fill="#0A0A0A"/>
      </g>
      <rect x="6.50439" y="14.2354" width="5.7881" height="33.6352" rx="2.89405" fill="#F5F5F5"/>
      <rect x="28.7307" y="15.856" width="4.74737" height="14.7963" rx="2.37368" fill="#F5F5F5"/>
      <path d="M22.4797 20.1829C22.4797 17.8676 18.3123 17.7519 18.3123 20.1829" stroke="#0A0A0A" strokeWidth="1.15762" strokeLinecap="round"/>
      <path d="M12.7531 12.2674C12.7531 12.7893 12.5457 13.2899 12.1767 13.6589C11.8076 14.028 11.307 14.2354 10.7851 14.2354C10.2632 14.2354 9.76262 14.028 9.39356 13.6589C9.0245 13.2899 8.81716 12.7893 8.81716 12.2674L10.7851 12.2674H12.7531Z" fill="#F5F5F5"/>
      <path d="M28.7308 12.2674C28.7308 12.7893 28.5235 13.2899 28.1544 13.6589C27.7854 14.028 27.2848 14.2353 26.7629 14.2353C26.2409 14.2353 25.7404 14.028 25.3713 13.6589C25.0023 13.2899 24.7949 12.7893 24.7949 12.2674L26.7629 12.2674H28.7308Z" fill="#F5F5F5"/>
    </svg>
  );
};

// Embarrassed 캐릭터 컴포넌트
const EmbarrassedCharacter = ({ width = 142, height = 142, isPressed = false }) => {
  if (isPressed) {
    // 찌부러진 상태
    return (
      <svg xmlns="http://www.w3.org/2000/svg" width={width} height={height} viewBox="0 0 135 125" fill="none">
        <path d="M54.8207 34.3507C59.169 22.5701 75.831 22.5701 80.1793 34.3507L80.4167 34.9939C82.2337 39.9167 86.9255 43.1861 92.1729 43.1861H94.9251C106.643 43.1861 111.115 58.4781 101.243 64.7916C96.6011 67.7607 94.678 73.6313 96.5862 78.8009C100.627 89.7489 88.5368 99.8271 78.7056 93.5394L74.8808 91.0932C70.3811 88.2153 64.6189 88.2153 60.1192 91.0932L56.2944 93.5394C46.4632 99.8271 34.3728 89.7489 38.4138 78.8009C40.322 73.6313 38.399 67.7607 33.7566 64.7916C23.885 58.4781 28.3569 43.1861 40.0749 43.1861H42.8271C48.0745 43.1861 52.7663 39.9167 54.5833 34.9939L54.8207 34.3507Z" fill="#F99841"/>
        <ellipse cx="7.02116" cy="6.18063" rx="7.02116" ry="6.18063" transform="matrix(-1 0 0 1 81.856 48.7847)" fill="#F5F5F5"/>
        <ellipse cx="7.02116" cy="6.18063" rx="7.02116" ry="6.18063" transform="matrix(-1 0 0 1 67.2168 48.7847)" fill="#F5F5F5"/>
        <mask id="mask0_3154_1394" style={{maskType:"alpha"}} maskUnits="userSpaceOnUse" x="67" y="48" width="15" height="14">
          <ellipse cx="7.02116" cy="6.18063" rx="7.02116" ry="6.18063" transform="matrix(-1 0 0 1 81.856 48.7847)" fill="#F5F5F5"/>
        </mask>
        <g mask="url(#mask0_3154_1394)">
          <ellipse cx="7.02158" cy="6.18099" rx="7.02158" ry="6.18099" transform="matrix(-1 0 0 1 87.7117 48.7847)" fill="#0A0A0A"/>
        </g>
        <mask id="mask1_3154_1394" style={{maskType:"alpha"}} maskUnits="userSpaceOnUse" x="53" y="48" width="15" height="14">
          <ellipse cx="7.02116" cy="6.18063" rx="7.02116" ry="6.18063" transform="matrix(-1 0 0 1 67.2168 48.7847)" fill="#F5F5F5"/>
        </mask>
        <g mask="url(#mask1_3154_1394)">
          <ellipse cx="7.02158" cy="6.18099" rx="7.02158" ry="6.18099" transform="matrix(-1 0 0 1 73.0723 48.7847)" fill="#0A0A0A"/>
        </g>
        <mask id="path-8-inside-1_3154_1394" fill="white">
          <path d="M66.0202 62.4264C65.5093 60.7481 66.0729 59.1567 67.2784 58.8724C68.4838 58.5883 69.8749 59.7185 70.3857 61.3967L66.0202 62.4264Z"/>
        </mask>
        <path d="M66.0202 62.4264C65.5093 60.7481 66.0729 59.1567 67.2784 58.8724C68.4838 58.5883 69.8749 59.7185 70.3857 61.3967L66.0202 62.4264Z" fill="#0A0A0A"/>
        <path d="M66.0202 62.4264L65.6032 62.5248L65.728 62.9347L66.1449 62.8363L66.0202 62.4264ZM67.2784 58.8724L67.1537 58.4625L67.1536 58.4625L67.2784 58.8724ZM70.3857 61.3967L70.5105 61.8066L70.9275 61.7082L70.8027 61.2984L70.3857 61.3967ZM66.0202 62.4264L66.4372 62.3281C66.2044 61.5635 66.2224 60.8359 66.4182 60.2827C66.6145 59.7283 66.9722 59.3839 67.4031 59.2823L67.2784 58.8724L67.1536 58.4625C66.3791 58.6452 65.8522 59.2386 65.5931 59.9706C65.3335 60.7038 65.3251 61.611 65.6032 62.5248L66.0202 62.4264ZM67.2784 58.8724L67.4031 59.2823C67.834 59.1807 68.3391 59.3216 68.8238 59.7154C69.3074 60.1082 69.736 60.7305 69.9687 61.4951L70.3857 61.3967L70.8027 61.2984C70.5246 60.3847 70.0023 59.6027 69.3613 59.082C68.7213 58.5621 67.9282 58.2799 67.1537 58.4625L67.2784 58.8724ZM70.3857 61.3967L70.261 60.9869L65.8954 62.0166L66.0202 62.4264L66.1449 62.8363L70.5105 61.8066L70.3857 61.3967Z" fill="black" mask="url(#path-8-inside-1_3154_1394)"/>
        <path d="M61.5396 55.8723C61.5396 56.2873 61.3523 56.6853 61.019 56.9788C60.6856 57.2722 60.2334 57.4371 59.762 57.4371C59.2905 57.4371 58.8384 57.2722 58.505 56.9788C58.1717 56.6853 57.9844 56.2873 57.9844 55.8723L59.762 55.8723H61.5396Z" fill="#F5F5F5"/>
        <path d="M76.1788 55.8723C76.1788 56.2873 75.9915 56.6853 75.6581 56.9788C75.3247 57.2722 74.8726 57.4371 74.4011 57.4371C73.9297 57.4371 73.4776 57.2722 73.1442 56.9788C72.8108 56.6853 72.6235 56.2873 72.6235 55.8723L74.4011 55.8723H76.1788Z" fill="#F5F5F5"/>
      </svg>
    );
  }
  
  // 기본 상태
  return (
    <svg xmlns="http://www.w3.org/2000/svg" width={width} height={height} viewBox="0 0 135 158" fill="none">
      <path d="M59.75 48.6935C65.7454 37.0058 83.1941 39.8182 85.2137 52.7977C86.1168 58.6023 90.655 63.1652 96.4546 64.1C109.423 66.1902 112.14 83.654 100.42 89.5856C95.1785 92.2383 92.2413 97.9643 93.1445 103.769C95.164 116.748 79.3946 124.729 70.1316 115.416C65.9891 111.251 59.6356 110.227 54.3942 112.879C42.674 118.811 30.2107 106.279 36.2061 94.5917C38.8873 89.3648 37.8978 83.0059 33.7553 78.8407C24.4923 69.5271 32.559 53.8014 45.5273 55.8916C51.3269 56.8264 57.0688 53.9204 59.75 48.6935Z" fill="#F99841"/>
      <circle cx="7.02116" cy="7.02116" r="7.02116" transform="matrix(-0.987259 -0.159124 -0.159124 0.987259 84.1521 68.5591)" fill="#F5F5F5"/>
      <circle cx="7.02116" cy="7.02116" r="7.02116" transform="matrix(-0.987259 -0.159124 -0.159124 0.987259 69.6995 66.2297)" fill="#F5F5F5"/>
      <mask id="mask0_3154_1411" style={{maskType:"alpha"}} maskUnits="userSpaceOnUse" x="69" y="67" width="15" height="15">
        <circle cx="7.02116" cy="7.02116" r="7.02116" transform="matrix(-0.987259 -0.159124 -0.159124 0.987259 84.1521 68.5591)" fill="#F5F5F5"/>
      </mask>
      <g mask="url(#mask0_3154_1411)">
        <circle cx="7.02158" cy="7.02158" r="7.02158" transform="matrix(-0.987259 -0.159124 -0.159124 0.987259 89.9331 69.4908)" fill="#0A0A0A"/>
      </g>
      <mask id="mask1_3154_1411" style={{maskType:"alpha"}} maskUnits="userSpaceOnUse" x="54" y="65" width="15" height="15">
        <circle cx="7.02116" cy="7.02116" r="7.02116" transform="matrix(-0.987259 -0.159124 -0.159124 0.987259 69.6995 66.2297)" fill="#F5F5F5"/>
      </mask>
      <g mask="url(#mask1_3154_1411)">
        <circle cx="7.02158" cy="7.02158" r="7.02158" transform="matrix(-0.987259 -0.159124 -0.159124 0.987259 75.4805 67.1614)" fill="#0A0A0A"/>
      </g>
      <mask id="path-8-inside-1_3154_1411" fill="white">
        <path d="M66.0518 81.3387C65.8508 79.3752 66.6945 77.6802 67.9359 77.553C69.1774 77.4259 70.3469 78.9149 70.5479 80.8785L66.0518 81.3387Z"/>
      </mask>
      <path d="M66.0518 81.3387C65.8508 79.3752 66.6945 77.6802 67.9359 77.553C69.1774 77.4259 70.3469 78.9149 70.5479 80.8785L66.0518 81.3387Z" fill="#0A0A0A"/>
      <path d="M66.0518 81.3387L65.6256 81.3823L65.6692 81.8085L66.0954 81.7649L66.0518 81.3387ZM67.9359 77.553L67.8923 77.1268L67.8922 77.1268L67.9359 77.553ZM70.5479 80.8785L70.5915 81.3047L71.0177 81.2611L70.9741 80.8349L70.5479 80.8785ZM66.0518 81.3387L66.478 81.2951C66.3845 80.3814 66.5369 79.5501 66.8365 78.9481C67.139 78.3404 67.5565 78.0226 67.9796 77.9792L67.9359 77.553L67.8922 77.1268C67.0739 77.2107 66.4489 77.8039 66.0694 78.5664C65.6871 79.3346 65.5182 80.3325 65.6256 81.3823L66.0518 81.3387ZM67.9359 77.553L67.9795 77.9792C68.4027 77.9359 68.8759 78.1625 69.2951 78.6964C69.7105 79.2252 70.0281 80.0084 70.1216 80.9222L70.5479 80.8785L70.9741 80.8349C70.8666 79.7851 70.499 78.842 69.969 78.1671C69.443 77.4973 68.7107 77.043 67.8923 77.1268L67.9359 77.553ZM70.5479 80.8785L70.5042 80.4523L66.0082 80.9125L66.0518 81.3387L66.0954 81.7649L70.5915 81.3047L70.5479 80.8785Z" fill="black" mask="url(#path-8-inside-1_3154_1411)"/>
      <path d="M62.8135 73.2753C62.7385 73.7407 62.4816 74.1573 62.0995 74.4334C61.7173 74.7094 61.2411 74.8224 60.7757 74.7474C60.3102 74.6724 59.8936 74.4155 59.6176 74.0334C59.3415 73.6512 59.2285 73.175 59.3036 72.7096L61.0585 72.9924L62.8135 73.2753Z" fill="#F5F5F5"/>
      <path d="M77.2661 75.6047C77.1911 76.0701 76.9343 76.4867 76.5521 76.7628C76.1699 77.0389 75.6938 77.1518 75.2283 77.0768C74.7629 77.0018 74.3463 76.7449 74.0702 76.3628C73.7941 75.9806 73.6812 75.5044 73.7562 75.039L75.5112 75.3218L77.2661 75.6047Z" fill="#F5F5F5"/>
    </svg>
  );
};

// Angry 캐릭터 컴포넌트
const AngryCharacter = ({ width = 86, height = 61, isPressed = false }) => {
  if (isPressed) {
    // 내려온 상태
    return (
      <svg xmlns="http://www.w3.org/2000/svg" width={width} height={height} viewBox="0 0 86 61" fill="none">
        <path d="M45.6234 58.6718C44.8165 59.8343 43.1293 59.922 42.2063 58.8494L2.68441 12.9222C1.54783 11.6014 2.35921 9.54757 4.0916 9.36018L81.2871 1.0098C83.1306 0.810371 84.3543 2.87094 83.297 4.39428L45.6234 58.6718Z" fill="#EE4947"/>
        <path d="M42.8121 21.0713C42.8121 21.9914 42.6309 22.9024 42.2788 23.7525C41.9267 24.6026 41.4106 25.3749 40.76 26.0255C40.1094 26.6761 39.337 27.1922 38.4869 27.5443C37.6369 27.8964 36.7258 28.0777 35.8057 28.0777C34.8856 28.0777 33.9745 27.8964 33.1245 27.5443C32.2744 27.1922 31.502 26.6761 30.8514 26.0255C30.2008 25.3749 29.6847 24.6026 29.3326 23.7525C28.9805 22.9024 28.7993 21.9914 28.7993 21.0713L35.8057 21.0713H42.8121Z" fill="#F5F5F5"/>
        <path d="M56.7945 21.0713C56.7945 21.9914 56.6133 22.9025 56.2612 23.7525C55.9091 24.6026 55.393 25.375 54.7424 26.0256C54.0918 26.6762 53.3194 27.1922 52.4693 27.5444C51.6193 27.8965 50.7082 28.0777 49.7881 28.0777C48.868 28.0777 47.9569 27.8965 47.1069 27.5444C46.2568 27.1922 45.4845 26.6762 44.8339 26.0256C44.1833 25.375 43.6672 24.6026 43.3151 23.7525C42.963 22.9025 42.7817 21.9914 42.7817 21.0713L49.7881 21.0713H56.7945Z" fill="#F5F5F5"/>
        <path d="M40.1742 21.1346C40.1742 21.7101 40.0608 22.28 39.8406 22.8117C39.6204 23.3434 39.2975 23.8265 38.8906 24.2335C38.4836 24.6405 38.0005 24.9633 37.4688 25.1835C36.9371 25.4037 36.3672 25.5171 35.7917 25.5171C35.2162 25.5171 34.6463 25.4037 34.1146 25.1835C33.5829 24.9633 33.0997 24.6405 32.6928 24.2335C32.2858 23.8265 31.963 23.3434 31.7428 22.8117C31.5225 22.28 31.4092 21.7101 31.4092 21.1346L35.7917 21.1346H40.1742Z" fill="#0A0A0A"/>
        <path d="M54.1259 21.1346C54.1259 21.7101 54.0125 22.28 53.7923 22.8117C53.572 23.3434 53.2492 23.8265 52.8422 24.2335C52.4353 24.6405 51.9522 24.9633 51.4205 25.1835C50.8888 25.4037 50.3189 25.5171 49.7433 25.5171C49.1678 25.5171 48.5979 25.4037 48.0662 25.1835C47.5345 24.9633 47.0514 24.6405 46.6444 24.2335C46.2375 23.8265 45.9147 23.3434 45.6944 22.8117C45.4742 22.28 45.3608 21.7101 45.3608 21.1346L49.7433 21.1346H54.1259Z" fill="#0A0A0A"/>
        <path d="M44.8687 29.6517C44.8687 27.5648 41.1122 27.4605 41.1122 29.6517" stroke="#0A0A0A" strokeWidth="1.04345" strokeLinecap="round"/>
        <path d="M33.1818 22.7256C33.1818 23.196 32.9949 23.6472 32.6622 23.9799C32.3296 24.3125 31.8784 24.4994 31.4079 24.4994C30.9374 24.4994 30.4863 24.3125 30.1536 23.9799C29.8209 23.6472 29.634 23.196 29.634 22.7256L31.4079 22.7256H33.1818Z" fill="#F5F5F5"/>
        <path d="M47.7902 22.7256C47.7902 23.196 47.6033 23.6472 47.2706 23.9799C46.938 24.3125 46.4868 24.4994 46.0163 24.4994C45.5458 24.4994 45.0947 24.3125 44.762 23.9799C44.4293 23.6472 44.2424 23.196 44.2424 22.7256L46.0163 22.7256H47.7902Z" fill="#F5F5F5"/>
      </svg>
    );
  }
  
  // 올라온 상태 (기본 상태)
  return (
    <svg xmlns="http://www.w3.org/2000/svg" width={width} height={height} viewBox="0 0 94 58" fill="none">
      <path d="M49.6287 55.5007C48.8209 56.5129 47.3107 56.5934 46.3998 55.6728L3.8069 12.6243C2.52283 11.3265 3.32449 9.11979 5.14216 8.94878L88.3361 1.1218C90.2363 0.94302 91.4202 3.13338 90.2297 4.62521L49.6287 55.5007Z" fill="#EE4947"/>
      <path d="M46.7971 19.9537C46.7971 20.8174 46.6015 21.6725 46.2216 22.4704C45.8416 23.2683 45.2846 23.9933 44.5824 24.604C43.8803 25.2147 43.0467 25.6991 42.1293 26.0296C41.212 26.3601 40.2287 26.5302 39.2357 26.5302C38.2427 26.5302 37.2595 26.3601 36.3421 26.0296C35.4247 25.6991 34.5911 25.2147 33.889 24.604C33.1869 23.9933 32.6299 23.2683 32.2499 22.4704C31.8699 21.6725 31.6743 20.8174 31.6743 19.9537L39.2357 19.9537H46.7971Z" fill="#F5F5F5"/>
      <path d="M61.8875 19.9537C61.8875 20.8174 61.6919 21.6726 61.3119 22.4704C60.9319 23.2683 60.3749 23.9933 59.6728 24.604C58.9706 25.2147 58.1371 25.6991 57.2197 26.0296C56.3023 26.3601 55.319 26.5302 54.3261 26.5302C53.3331 26.5302 52.3498 26.3601 51.4324 26.0296C50.515 25.6991 49.6815 25.2147 48.9793 24.604C48.2772 23.9933 47.7202 23.2683 47.3402 22.4704C46.9602 21.6726 46.7646 20.8174 46.7646 19.9537L54.3261 19.9537H61.8875Z" fill="#F5F5F5"/>
      <path d="M43.9506 20.0132C43.9506 20.5534 43.8282 21.0883 43.5905 21.5874C43.3528 22.0864 43.0045 22.5399 42.5653 22.9219C42.1261 23.3039 41.6047 23.6069 41.0309 23.8136C40.457 24.0203 39.842 24.1267 39.2209 24.1267C38.5998 24.1267 37.9847 24.0203 37.4109 23.8136C36.8371 23.6069 36.3157 23.3039 35.8765 22.9219C35.4373 22.5399 35.0889 22.0864 34.8512 21.5874C34.6135 21.0883 34.4912 20.5534 34.4912 20.0132L39.2209 20.0132H43.9506Z" fill="#0A0A0A"/>
      <path d="M59.0072 20.0132C59.0072 20.5534 58.8849 21.0883 58.6472 21.5874C58.4095 22.0864 58.0611 22.5399 57.6219 22.9219C57.1827 23.3039 56.6613 23.6069 56.0875 23.8136C55.5137 24.0203 54.8986 24.1267 54.2775 24.1267C53.6564 24.1267 53.0414 24.0203 52.4676 23.8136C51.8937 23.6069 51.3723 23.3039 50.9331 22.9219C50.494 22.5399 50.1456 22.0864 49.9079 21.5874C49.6702 21.0883 49.5479 20.5534 49.5479 20.0132L54.2775 20.0132H59.0072Z" fill="#0A0A0A"/>
      <path d="M49.0166 28.0076C49.0166 26.0488 44.9626 25.9508 44.9626 28.0076" stroke="#0A0A0A" strokeWidth="1.04345" strokeLinecap="round"/>
      <path d="M36.404 21.5065C36.404 21.9481 36.2023 22.3716 35.8433 22.6838C35.4842 22.9961 34.9973 23.1715 34.4896 23.1715C33.9819 23.1715 33.4949 22.9961 33.1359 22.6838C32.7769 22.3716 32.5752 21.9481 32.5752 21.5065L34.4896 21.5065H36.404Z" fill="#F5F5F5"/>
      <path d="M52.1696 21.5065C52.1696 21.9481 51.9679 22.3716 51.6089 22.6838C51.2499 22.9961 50.7629 23.1715 50.2552 23.1715C49.7475 23.1715 49.2606 22.9961 48.9015 22.6838C48.5425 22.3716 48.3408 21.9481 48.3408 21.5065L50.2552 21.5065H52.1696Z" fill="#F5F5F5"/>
    </svg>
  );
};

// Normal 캐릭터 컴포넌트
const NormalCharacter = ({ width = 77, height = 77, isPressed = false }) => {
  if (isPressed) {
    // 뛸 때 상태
    return (
      <svg xmlns="http://www.w3.org/2000/svg" width={width} height={height} viewBox="0 0 77 78" fill="none">
        <path d="M35.9573 2.34735C37.4735 1.2458 39.5265 1.24581 41.0427 2.34736L72.573 25.2555C74.0892 26.357 74.7236 28.3096 74.1445 30.0919L62.1009 67.1581C61.5218 68.9404 59.8609 70.1472 57.9868 70.1472H19.0132C17.1391 70.1472 15.4782 68.9404 14.8991 67.1581L2.85553 30.0919C2.27642 28.3096 2.91084 26.357 4.42699 25.2555L35.9573 2.34735Z" fill="#5CC463"/>
        <line x1="36.681" y1="39.4042" x2="40.3188" y2="39.4042" stroke="#0A0A0A" strokeWidth="1.0105" strokeLinecap="round"/>
        <circle cx="31.4414" cy="28.9098" r="6.7851" fill="#F5F5F5"/>
        <circle cx="45.5883" cy="28.9098" r="6.7851" fill="#F5F5F5"/>
        <mask id="mask0_3154_1517" style={{maskType:"alpha"}} maskUnits="userSpaceOnUse" x="24" y="22" width="15" height="14">
          <circle cx="31.4414" cy="28.9098" r="6.7851" fill="#F5F5F5"/>
        </mask>
        <g mask="url(#mask0_3154_1517)">
          <circle cx="25.7828" cy="28.9102" r="6.7855" fill="#0A0A0A"/>
        </g>
        <mask id="mask1_3154_1517" style={{maskType:"alpha"}} maskUnits="userSpaceOnUse" x="38" y="22" width="15" height="14">
          <circle cx="45.5883" cy="28.9098" r="6.7851" fill="#F5F5F5"/>
        </mask>
        <g mask="url(#mask1_3154_1517)">
          <circle cx="39.9298" cy="28.9102" r="6.7855" fill="#0A0A0A"/>
        </g>
        <path d="M33.7506 29.9055C33.7506 30.3611 33.5696 30.7981 33.2475 31.1202C32.9253 31.4424 32.4884 31.6234 32.0328 31.6234C31.5772 31.6234 31.1402 31.4424 30.8181 31.1202C30.4959 30.7981 30.3149 30.3611 30.3149 29.9055L32.0328 29.9055H33.7506Z" fill="#F5F5F5"/>
        <path d="M47.8976 29.9055C47.8976 30.3611 47.7166 30.7981 47.3945 31.1202C47.0723 31.4424 46.6354 31.6234 46.1798 31.6234C45.7242 31.6234 45.2872 31.4424 44.9651 31.1202C44.6429 30.7981 44.4619 30.3611 44.4619 29.9055L46.1798 29.9055H47.8976Z" fill="#F5F5F5"/>
      </svg>
    );
  }
  
  // 기본 상태
  return (
    <svg xmlns="http://www.w3.org/2000/svg" width={width} height={height} viewBox="0 0 71 71" fill="none">
      <path d="M32.9573 2.09183C34.4735 0.99028 36.5265 0.990282 38.0427 2.09183L66.2443 22.5815C67.7605 23.6831 68.3949 25.6356 67.8158 27.418L57.0437 60.571C56.4646 62.3533 54.8036 63.5601 52.9296 63.5601H18.0704C16.1964 63.5601 14.5354 62.3533 13.9563 60.571L3.18423 27.418C2.60511 25.6356 3.23953 23.6831 4.75569 22.5815L32.9573 2.09183Z" fill="#5CC463"/>
      <line x1="33.8925" y1="35.566" x2="37.1077" y2="35.566" stroke="#0A0A0A" strokeWidth="1.0105" strokeLinecap="round"/>
      <circle cx="29.0828" cy="26.0715" r="6.16827" fill="#F5F5F5"/>
      <circle cx="41.9437" cy="26.0715" r="6.16827" fill="#F5F5F5"/>
      <mask id="mask0_3154_1503" style={{maskType:"alpha"}} maskUnits="userSpaceOnUse" x="22" y="19" width="14" height="14">
        <circle cx="29.0828" cy="26.0715" r="6.16827" fill="#F5F5F5"/>
      </mask>
      <g mask="url(#mask0_3154_1503)">
        <circle cx="23.9387" cy="26.072" r="6.16863" fill="#0A0A0A"/>
      </g>
      <mask id="mask1_3154_1503" style={{maskType:"alpha"}} maskUnits="userSpaceOnUse" x="35" y="19" width="14" height="14">
        <circle cx="41.9437" cy="26.0715" r="6.16827" fill="#F5F5F5"/>
      </mask>
      <g mask="url(#mask1_3154_1503)">
        <circle cx="36.7995" cy="26.072" r="6.16863" fill="#0A0A0A"/>
      </g>
      <path d="M31.1824 26.9768C31.1824 27.3909 31.0179 27.7882 30.725 28.081C30.4322 28.3739 30.0349 28.5384 29.6208 28.5384C29.2066 28.5384 28.8094 28.3739 28.5165 28.081C28.2236 27.7882 28.0591 27.3909 28.0591 26.9768L29.6208 26.9768H31.1824Z" fill="#F5F5F5"/>
      <path d="M44.0433 26.9768C44.0433 27.3909 43.8787 27.7882 43.5859 28.081C43.293 28.3739 42.8958 28.5384 42.4816 28.5384C42.0674 28.5384 41.6702 28.3739 41.3773 28.081C41.0845 27.7882 40.9199 27.3909 40.9199 26.9768L42.4816 26.9768H44.0433Z" fill="#F5F5F5"/>
    </svg>
  );
};

// Rev 텍스트 컴포넌트
const RevText = ({ width = 84.24, height = 37.26 }) => {
  return (
    <svg xmlns="http://www.w3.org/2000/svg" width={width} height={height} viewBox="0 0 85 38" fill="none">
      <g clipPath="url(#clip0_3091_6716)">
        <path d="M0 0H13.8872C16.5706 0 18.8647 0.468922 20.7692 1.40927C22.6738 2.34712 24.1261 3.69119 25.1236 5.43648C26.1211 7.18428 26.6211 9.22296 26.6211 11.5575C26.6211 13.8921 26.1186 15.8882 25.111 17.5933C24.106 19.2985 22.6285 20.605 20.6813 21.5102C18.734 22.4155 16.4124 22.8693 13.7138 22.8693H4.31917V16.8686H12.563C14.0354 16.8686 15.2465 16.668 16.1938 16.2693C17.141 15.8706 17.8546 15.2763 18.3295 14.4939C18.8044 13.7116 19.0405 12.7311 19.0405 11.555C19.0405 10.379 18.8044 9.3358 18.3295 8.51832C17.8546 7.70335 17.136 7.08648 16.1711 6.67022C15.2063 6.25396 13.9952 6.04583 12.5404 6.04583H7.36194V35.4575H0V0ZM27.9 35.46H19.7039L11.0907 19.3462H19.0657L27.9 35.46Z" fill="#B780FF"/>
        <path d="M36.2511 35.5898C34.2652 34.4756 32.7362 32.8884 31.6667 30.8234C30.5972 28.7608 30.0599 26.3361 30.0599 23.5516C30.0599 20.7672 30.5946 18.3802 31.6667 16.2925C32.7362 14.2048 34.2451 12.5874 36.1908 11.4405C38.1366 10.2935 40.3911 9.72 42.957 9.72C45.3597 9.72 47.5012 10.2231 49.3817 11.2317C51.2622 12.2378 52.7409 13.7571 53.8205 15.7894C54.9001 17.8193 55.4399 20.3019 55.4399 23.2322V25.2721H33.03V20.7269H48.5984C48.5984 19.6454 48.3624 18.6845 47.8879 17.8419C47.4134 16.9993 46.7606 16.3403 45.9271 15.8649C45.0936 15.3895 44.1445 15.153 43.0825 15.153C41.9553 15.153 40.9485 15.4121 40.0673 15.9278C39.186 16.4434 38.4931 17.1527 37.996 18.0532C37.4964 18.9537 37.2403 19.9371 37.2227 21.0011V25.2746C37.2227 26.6002 37.4763 27.7647 37.9834 28.7633C38.4906 29.7619 39.2061 30.524 40.1275 31.0472C41.0514 31.5704 42.126 31.832 43.3512 31.832C44.1671 31.832 44.9128 31.7138 45.5831 31.4748C46.2535 31.2384 46.8209 30.9265 47.2878 30.5416C47.7548 30.1568 48.1088 29.7015 48.3549 29.1783H55.2691C54.9252 30.8007 54.2197 32.2193 53.1477 33.4393C52.0781 34.6592 50.6948 35.5999 49.0051 36.2639C47.3155 36.928 45.3973 37.26 43.2558 37.26C40.5744 37.26 38.242 36.7041 36.2561 35.5898H36.2511Z" fill="#B780FF"/>
        <path d="M74.8844 35.46H66.7278L57.4199 8.82002H65.11L70.6707 27.9523H70.9641L76.5498 8.82002H84.2399L74.8844 35.46Z" fill="#B780FF"/>
      </g>
      <defs>
        <clipPath id="clip0_3091_6716">
          <rect width="84.24" height="37.26" fill="white"/>
        </clipPath>
      </defs>
    </svg>
  );
};

// Ellipse329 컴포넌트 (큰 원)
const Ellipse329 = ({ width = 30.06, height = 30.24 }) => {
  return (
    <svg width={width} height={height} viewBox="0 0 31 31" fill="none" xmlns="http://www.w3.org/2000/svg">
      <circle cx="15.5" cy="15.5" r="13.5" stroke="url(#paint0_linear_3250_8011)" strokeWidth="2.40745"/>
      <g filter="url(#filter0_d_3250_8010)">
        <circle cx="15.5" cy="15.5" r="10" fill="url(#paint1_linear_3250_8010)"/>
        <circle cx="15.5" cy="15.5" r="10" stroke="url(#paint2_linear_3250_8010)" strokeWidth="0.160497"/>
      </g>
      <defs>
        <filter id="filter0_d_3250_8010" x="2.5" y="2.5" width="26" height="26" filterUnits="userSpaceOnUse" colorInterpolationFilters="sRGB">
          <feFlood floodOpacity="0" result="BackgroundImageFix"/>
          <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
          <feOffset dy="0.641986"/>
          <feGaussianBlur stdDeviation="0.320993"/>
          <feComposite in2="hardAlpha" operator="out"/>
          <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
          <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_3250_8010"/>
          <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_3250_8010" result="shape"/>
        </filter>
        <linearGradient id="paint0_linear_3250_8011" x1="6.15636" y1="4.40455" x2="25.4798" y2="28.0389" gradientUnits="userSpaceOnUse">
          <stop offset="1" stopColor="#B780FF"/>
        </linearGradient>
        <linearGradient id="paint1_linear_3250_8010" x1="4.187146" y1="4.479981" x2="25.5328" y2="27.2853" gradientUnits="userSpaceOnUse">
          <stop offset="1" stopColor="#B780FF"/>
        </linearGradient>
        <linearGradient id="paint2_linear_3250_8010" x1="8.6807" y1="7.00686" x2="21.359" y2="23.028" gradientUnits="userSpaceOnUse">
          <stop offset="1" stopColor="#B780FF"/>
        </linearGradient>
      </defs>
    </svg>
  );
};

// Excite 캐릭터 컴포넌트
const ExciteCharacter = ({ width = 108, height = 108, isPressed = false }) => {
  if (isPressed) {
    // 밑으로 내려올 때 상태
    return (
      <svg xmlns="http://www.w3.org/2000/svg" width={width} height={height} viewBox="0 0 81 68" fill="none">
        <path d="M39.393 4.04938C39.6229 3.19636 40.8331 3.19636 41.0631 4.04937L45.7929 21.5957C45.9374 22.1315 46.542 22.3946 47.0325 22.135L65.0802 12.585C65.8974 12.1526 66.7318 13.1316 66.1754 13.87L55.1812 28.4591C54.7954 28.9711 55.0812 29.7102 55.7111 29.8294L75.7386 33.6203C76.6773 33.798 76.6773 35.1422 75.7386 35.3198L55.7111 39.1107C55.0812 39.2299 54.7954 39.969 55.1812 40.481L66.1754 55.0702C66.7318 55.8086 65.8974 56.7875 65.0802 56.3551L47.0325 46.8051C46.542 46.5456 45.9374 46.8086 45.7929 47.3445L41.0631 64.8908C40.8331 65.7438 39.6229 65.7438 39.393 64.8908L34.6631 47.3445C34.5187 46.8086 33.9141 46.5456 33.4236 46.8051L15.3759 56.3551C14.5587 56.7875 13.7242 55.8086 14.2807 55.0702L25.2748 40.481C25.6606 39.969 25.3749 39.2299 24.745 39.1107L4.71748 35.3198C3.77879 35.1422 3.77879 33.798 4.71748 33.6203L24.745 29.8294C25.3749 29.7102 25.6606 28.9711 25.2748 28.4591L14.2807 13.87C13.7242 13.1316 14.5587 12.1526 15.3759 12.585L33.4236 22.135C33.9141 22.3946 34.5187 22.1315 34.6631 21.5957L39.393 4.04938Z" fill="#EE47CA"/>
        <ellipse cx="32.8557" cy="28.646" rx="7.08666" ry="5.93835" fill="#F5F5F5"/>
        <ellipse cx="47.6311" cy="28.646" rx="7.08666" ry="5.93835" fill="#F5F5F5"/>
        <mask id="mask0_3154_1449" style={{maskType: 'alpha'}} maskUnits="userSpaceOnUse" x="25" y="22" width="15" height="13">
          <ellipse cx="32.8557" cy="28.646" rx="7.08666" ry="5.93835" fill="#F5F5F5"/>
        </mask>
        <g mask="url(#mask0_3154_1449)">
          <ellipse cx="26.9455" cy="28.6463" rx="7.08707" ry="5.9387" fill="#0A0A0A"/>
        </g>
        <mask id="mask1_3154_1449" style={{maskType: 'alpha'}} maskUnits="userSpaceOnUse" x="40" y="22" width="15" height="13">
          <ellipse cx="47.6311" cy="28.646" rx="7.08666" ry="5.93835" fill="#F5F5F5"/>
        </mask>
        <g mask="url(#mask1_3154_1449)">
          <ellipse cx="41.7213" cy="28.6463" rx="7.08707" ry="5.9387" fill="#0A0A0A"/>
        </g>
        <path d="M34.8452 29.5175C34.8452 29.9163 34.6562 30.2987 34.3197 30.5806C33.9832 30.8626 33.5269 31.021 33.051 31.021C32.5752 31.021 32.1188 30.8626 31.7823 30.5806C31.4459 30.2987 31.2568 29.9163 31.2568 29.5175L33.051 29.5175H34.8452Z" fill="#F5F5F5"/>
        <path d="M49.6211 29.5175C49.6211 29.9163 49.4321 30.2987 49.0956 30.5806C48.7591 30.8626 48.3028 31.021 47.8269 31.021C47.3511 31.021 46.8947 30.8626 46.5582 30.5806C46.2217 30.2987 46.0327 29.9163 46.0327 29.5175L47.8269 29.5175H49.6211Z" fill="#F5F5F5"/>
        <mask id="path-10-inside-1_3154_1449" fill="white">
          <path d="M41.7331 33.8105C41.1089 35.3768 39.6443 36.3781 38.4625 36.0474C37.281 35.7164 36.829 34.179 37.4531 32.6129L41.7331 33.8105Z"/>
        </mask>
        <path d="M41.7331 33.8105C41.1089 35.3768 39.6443 36.3781 38.4625 36.0474C37.281 35.7164 36.829 34.179 37.4531 32.6129L41.7331 33.8105Z" fill="#0A0A0A"/>
        <path d="M41.7331 33.8105L42.1495 33.927L42.3096 33.5253L41.8931 33.4088L41.7331 33.8105ZM38.4625 36.0474L38.3023 36.4491L38.3024 36.4491L38.4625 36.0474ZM37.4531 32.6129L37.6132 32.2111L37.1968 32.0946L37.0367 32.4963L37.4531 32.6129ZM41.7331 33.8105L41.3166 33.694C41.0347 34.4013 40.569 34.9646 40.0645 35.3096C39.5595 35.655 39.0476 35.7646 38.6226 35.6457L38.4625 36.0474L38.3024 36.4491C39.0592 36.6609 39.8705 36.4352 40.5493 35.971C41.2286 35.5065 41.8072 34.786 42.1495 33.927L41.7331 33.8105ZM38.4625 36.0474L38.6227 35.6457C38.1978 35.5267 37.8675 35.1813 37.7116 34.6511C37.5559 34.1214 37.5877 33.4367 37.8696 32.7294L37.4531 32.6129L37.0367 32.4963C36.6944 33.3551 36.6402 34.2222 36.8498 34.9355C37.0593 35.6483 37.5457 36.2371 38.3023 36.4491L38.4625 36.0474ZM37.4531 32.6129L37.293 33.0146L41.573 34.2122L41.7331 33.8105L41.8931 33.4088L37.6132 32.2111L37.4531 32.6129Z" fill="black" mask="url(#path-10-inside-1_3154_1449)"/>
      </svg>
    );
  }
  
  // 기본 상태 (위로 튀어오를 때)
  return (
    <svg xmlns="http://www.w3.org/2000/svg" width={width} height={height} viewBox="0 0 104 103" fill="none">
      <path d="M31.6371 17.2491C31.3903 16.361 32.5187 15.7545 33.1232 16.4503L47.2132 32.6674C47.605 33.1183 48.3251 33.0457 48.619 32.5256L59.1886 13.8226C59.6421 13.0201 60.8688 13.3892 60.8043 14.3087L59.3002 35.7389C59.2584 36.3349 59.8189 36.7927 60.3945 36.6328L81.0934 30.8816C81.9814 30.6348 82.5879 31.7632 81.8921 32.3677L65.6751 46.4577C65.2242 46.8495 65.2967 47.5696 65.8168 47.8635L84.5199 58.4331C85.3223 58.8866 84.9533 60.1133 84.0338 60.0488L62.6035 58.5447C62.0076 58.5029 61.5497 59.0634 61.7097 59.639L67.4609 80.3378C67.7077 81.2259 66.5793 81.8324 65.9747 81.1366L51.8848 64.9196C51.493 64.4686 50.7729 64.5412 50.4789 65.0613L39.9094 83.7643C39.4559 84.5668 38.2292 84.1977 38.2937 83.2783L39.7978 61.848C39.8396 61.2521 39.279 60.7942 38.7035 60.9541L18.0046 66.7054C17.1165 66.9521 16.5101 65.8237 17.2058 65.2192L33.4229 51.1292C33.8738 50.7374 33.8012 50.0173 33.2812 49.7234L14.5781 39.1539C13.7757 38.7004 14.1447 37.4736 15.0642 37.5382L36.4945 39.0422C37.0904 39.0841 37.5482 38.5235 37.3883 37.948L31.6371 17.2491Z" fill="#EE47CA"/>
      <circle cx="39.7646" cy="46.1617" r="7.08666" transform="rotate(-28.2567 39.7646 46.1617)" fill="#F5F5F5"/>
      <circle cx="52.7795" cy="39.1665" r="7.08666" transform="rotate(-28.2567 52.7795 39.1665)" fill="#F5F5F5"/>
      <mask id="mask0_3154_1466" style={{maskType: 'alpha'}} maskUnits="userSpaceOnUse" x="32" y="39" width="15" height="15">
        <circle cx="39.7646" cy="46.1617" r="7.08666" transform="rotate(-28.2567 39.7646 46.1617)" fill="#F5F5F5"/>
      </mask>
      <g mask="url(#mask0_3154_1466)">
        <circle cx="34.5592" cy="48.96" r="7.08707" transform="rotate(-28.2567 34.5592 48.96)" fill="#0A0A0A"/>
      </g>
      <mask id="mask1_3154_1466" style={{maskType: 'alpha'}} maskUnits="userSpaceOnUse" x="45" y="32" width="15" height="15">
        <circle cx="52.7795" cy="39.1665" r="7.08666" transform="rotate(-28.2567 52.7795 39.1665)" fill="#F5F5F5"/>
      </mask>
      <g mask="url(#mask1_3154_1466)">
        <circle cx="47.5743" cy="41.9646" r="7.08707" transform="rotate(-28.2567 47.5743 41.9646)" fill="#0A0A0A"/>
      </g>
      <path d="M42.0097 46.1357C42.235 46.5548 42.2845 47.0463 42.1474 47.502C42.0104 47.9577 41.6979 48.3402 41.2787 48.5655C40.8596 48.7908 40.3681 48.8403 39.9124 48.7032C39.4568 48.5661 39.0742 48.2537 38.8489 47.8345L40.4293 46.9851L42.0097 46.1357Z" fill="#F5F5F5"/>
      <path d="M55.0246 39.1405C55.2499 39.5597 55.2994 40.0512 55.1623 40.5068C55.0253 40.9625 54.7128 41.3451 54.2936 41.5703C53.8745 41.7956 53.383 41.8452 52.9273 41.7081C52.4717 41.571 52.0891 41.2585 51.8638 40.8394L53.4442 39.9899L55.0246 39.1405Z" fill="#F5F5F5"/>
      <mask id="path-10-inside-1_3154_1466" fill="white">
        <path d="M50.5017 47.3876C50.8368 49.3296 50.1133 51.0757 48.8855 51.2876C47.6577 51.4992 46.3908 50.0967 46.0557 48.1548L50.5017 47.3876Z"/>
      </mask>
      <path d="M50.5017 47.3876C50.8368 49.3296 50.1133 51.0757 48.8855 51.2876C47.6577 51.4992 46.3908 50.0967 46.0557 48.1548L50.5017 47.3876Z" fill="#0A0A0A"/>
      <path d="M50.5017 47.3876L50.9278 47.3141L50.8543 46.888L50.4281 46.9615L50.5017 47.3876ZM48.8855 51.2876L48.9589 51.7138L48.959 51.7138L48.8855 51.2876ZM46.0557 48.1548L45.9821 47.7287L45.556 47.8022L45.6295 48.2284L46.0557 48.1548ZM50.5017 47.3876L50.0755 47.4612C50.2314 48.3641 50.1368 49.2017 49.8802 49.8209C49.6211 50.446 49.2283 50.7896 48.8119 50.8615L48.8855 51.2876L48.959 51.7138C49.7705 51.5737 50.3533 50.9383 50.6792 50.152C51.0075 49.3596 51.1071 48.3531 50.9278 47.3141L50.5017 47.3876ZM48.8855 51.2876L48.812 50.8615C48.3957 50.9332 47.9103 50.7411 47.4567 50.2389C47.0074 49.7415 46.6376 48.9842 46.4818 48.0813L46.0557 48.1548L45.6295 48.2284C45.8088 49.2673 46.24 50.1822 46.8149 50.8186C47.3855 51.4503 48.1475 51.8536 48.9589 51.7138L48.8855 51.2876ZM46.0557 48.1548L46.1292 48.581L50.5752 47.8138L50.5017 47.3876L50.4281 46.9615L45.9821 47.7287L46.0557 48.1548Z" fill="black" mask="url(#path-10-inside-1_3154_1466)"/>
    </svg>
  );
};

type OnBoardingScreen1NavigationProp = NativeStackNavigationProp<RootStackParamList, 'OnBoarding'>;

const OnBoardingScreen1: FC = () => {
  const navigation = useNavigation<OnBoardingScreen1NavigationProp>();
  
  // 앵그리 캐릭터 애니메이션 (Figma 프로토타입 기반)
  const [angryFrame, setAngryFrame] = useState<'Frame 85' | 'Frame 86'>('Frame 85');

  useEffect(() => {
    // 1ms 딜레이 후 Frame 85로 변경, 600ms 동안 유지
    const interval = setInterval(() => {
      setAngryFrame(prev => prev === 'Frame 85' ? 'Frame 86' : 'Frame 85');
    }, 600);

    return () => {
      clearInterval(interval);
    };
  }, []);

  const handleNavigateToRecording = () => {
    navigation.navigate('Recording');
  };

  return (
    <SafeAreaView style={styles.container}>
      <StatusBar barStyle="light-content" backgroundColor="#000000" />
      
      {/* 배경 프레임 */}
      <View style={styles.frame} />

      {/* 상단 헤더 */}
      <Header />

      {/* 캐릭터들 그룹 */}
      <View style={styles.charactersGroup}>
        <View style={styles.character1}>
          <SadCharacter width={41} height={89} />
        </View>
        <View style={styles.character2}>
          <EmbarrassedCharacter width={142} height={142} />
        </View>
        <View style={styles.character3}>
          <HappyCharacter width={108} height={108} />
        </View>
        <View style={styles.character4}>
          <ExciteCharacter width={107.10901975631714} height={107.10901975631714} />
        </View>
        <View style={styles.character5}>
          <NormalCharacter width={77} height={77} />
        </View>

        <View style={styles.character6}>
          <AngryCharacter 
            width={angryFrame === 'Frame 85' ? 92.813 : 86} 
            height={angryFrame === 'Frame 85' ? 56.758 : 60.468} 
            isPressed={angryFrame === 'Frame 86'} 
          />
        </View>
      </View>

      {/* Rev_O 로고 그룹 - Figma 정확한 위치 */}
      <View style={styles.logoGroup}>
        {/* Layer_1 - Rev 텍스트 (134, 439) */}
        <View style={styles.logoText}>
          <RevText width={84.24} height={37.26} />
        </View>
        
        {/* Ellipse 329 - 큰 원 (229.94, 444.58) */}
        <View style={styles.logoEllipse329}>
          <svg width="31" height="31" viewBox="0 0 31 31" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="15.5" cy="15.5" r="13.5" stroke="url(#paint0_linear_3250_8011)" strokeWidth="2.40745"/>
            <g filter="url(#filter0_d_3250_8010)">
              <circle cx="15.5" cy="15.5" r="10" fill="url(#paint1_linear_3250_8010)"/>
              <circle cx="15.5" cy="15.5" r="10" stroke="url(#paint2_linear_3250_8010)" strokeWidth="0.160497"/>
            </g>
            <defs>
              <filter id="filter0_d_3250_8010" x="2.5" y="2.5" width="26" height="26" filterUnits="userSpaceOnUse" colorInterpolationFilters="sRGB">
                <feFlood floodOpacity="0" result="BackgroundImageFix"/>
                <feColorMatrix in="SourceAlpha" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/>
                <feOffset dy="0.641986"/>
                <feGaussianBlur stdDeviation="0.320993"/>
                <feComposite in2="hardAlpha" operator="out"/>
                <feColorMatrix type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"/>
                <feBlend mode="normal" in2="BackgroundImageFix" result="effect1_dropShadow_3250_8010"/>
                <feBlend mode="normal" in="SourceGraphic" in2="effect1_dropShadow_3250_8010" result="shape"/>
              </filter>
              <linearGradient id="paint0_linear_3250_8011" x1="6.15636" y1="4.40455" x2="25.4798" y2="28.0389" gradientUnits="userSpaceOnUse">
                <stop offset="1" stopColor="#B780FF"/>
              </linearGradient>
              <linearGradient id="paint1_linear_3250_8010" x1="4.187146" y1="4.479981" x2="25.5328" y2="27.2853" gradientUnits="userSpaceOnUse">
                <stop offset="1" stopColor="#B780FF"/>
              </linearGradient>
              <linearGradient id="paint2_linear_3250_8010" x1="8.6807" y1="7.00686" x2="21.359" y2="23.028" gradientUnits="userSpaceOnUse">
                <stop offset="1" stopColor="#B780FF"/>
              </linearGradient>
            </defs>
          </svg>
        </View>
        
        
        {/* Rectangle 795 - 선 (216.8, 472.84) */}
        <View style={styles.logoLine} />
      </View>

      {/* 로그인 버튼 */}
      <TouchableOpacity 
        style={styles.loginButton}
        onPress={handleNavigateToRecording}
      >
        <Text style={styles.loginButtonText}>로그인</Text>
      </TouchableOpacity>

      {/* 회원가입 버튼 */}
      <TouchableOpacity style={styles.signupButton}>
        <Text style={styles.signupButtonText}>회원가입</Text>
      </TouchableOpacity>

      {/* 홈 인디케이터 */}
    </SafeAreaView>
  );
};

const styles = StyleSheet.create({
  container: {
    width: screenWidth,
    height: screenHeight,
    backgroundColor: '#000000',
    position: 'relative',
  },
  frame: {
    position: 'absolute',
    left: 0,
    top: 0,
    width: 393,
    height: 852,
    backgroundColor: '#000000',
  },
  charactersGroup: {
    position: 'absolute',
    left: 38,
    top: 258.99993896484375,
    width: 318,
    height: 176.00006103515625,
  },
  character1: {
    position: 'absolute',
    left: 0,
    top: 50,
  },
  character2: {
    position: 'absolute',
    left: 0,
    top: 34,
  },
  character3: {
    position: 'absolute',
    left: 90,
    top: 32,
    zIndex: 3,
  },
  character4: {
    position: 'absolute',
    left: 184,
    zIndex: 2,
  },
  character5: {
    position: 'absolute',
    left: 179,
    top: 66,
    zIndex: 2,
  },
  character6: {
    position: 'absolute',
    left: 232,
    top: 76,
    zIndex: 1,
  },
  logoGroup: {
    position: 'absolute',
    left: 134,
    top: 439,
    width: 126,
    height: 37.26,
  },
  logoText: {
    position: 'absolute',
    left: 0,
    top: 0,
  },
  logoEllipse329: {
    position: 'absolute',
    left: 95.94,
    top: 5.58,
  },
  logoLine: {
    position: 'absolute',
    left: 82.8,
    top: 33.84,
    width: 12.24,
    height: 1.98,
    backgroundColor: '#B780FF',
  },
  loginButton: {
    position: 'absolute',
    left: 16,
    top: 698,
    width: 361,
    height: 49,
    backgroundColor: '#B780FF',
    borderRadius: 25,
    justifyContent: 'center',
    alignItems: 'center',
  },
  loginButtonText: {
    color: '#000000',
    fontSize: 24,
    fontWeight: '600',
    letterSpacing: 0.48,
  },
  signupButton: {
    position: 'absolute',
    left: 16,
    top: 763,
    width: 361,
    height: 49,
    backgroundColor: '#3A3A3A',
    borderRadius: 25,
    justifyContent: 'center',
    alignItems: 'center',
  },
  signupButtonText: {
    color: '#FFFFFF',
    fontSize: 24,
    fontWeight: '600',
    letterSpacing: 0.48,
  },
});

export default OnBoardingScreen1;